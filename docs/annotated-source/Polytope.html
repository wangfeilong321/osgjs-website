<!DOCTYPE html>

<html>
<head>
  <title>Polytope.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
      <ul id="jump_to">
        <li>
          <a class="large" href="javascript:void(0);">Jump To &hellip;</a>
          <a class="small" href="javascript:void(0);">+</a>
          <div id="jump_wrapper">
          <div id="jump_page">
            
              
              <a class="source" href="OSG.html">
                OSG.js
              </a>
            
              
              <a class="source" href="BillboardAttribute.html">
                BillboardAttribute.js
              </a>
            
              
              <a class="source" href="BlendColor.html">
                BlendColor.js
              </a>
            
              
              <a class="source" href="BlendFunc.html">
                BlendFunc.js
              </a>
            
              
              <a class="source" href="BoundingBox.html">
                BoundingBox.js
              </a>
            
              
              <a class="source" href="BoundingSphere.html">
                BoundingSphere.js
              </a>
            
              
              <a class="source" href="BufferArray.html">
                BufferArray.js
              </a>
            
              
              <a class="source" href="BufferArrayProxy.html">
                BufferArrayProxy.js
              </a>
            
              
              <a class="source" href="Camera.html">
                Camera.js
              </a>
            
              
              <a class="source" href="ColorMask.html">
                ColorMask.js
              </a>
            
              
              <a class="source" href="ComputeBoundsVisitor.html">
                ComputeBoundsVisitor.js
              </a>
            
              
              <a class="source" href="ComputeMatrixFromNodePath.html">
                ComputeMatrixFromNodePath.js
              </a>
            
              
              <a class="source" href="CullFace.html">
                CullFace.js
              </a>
            
              
              <a class="source" href="CullSettings.html">
                CullSettings.js
              </a>
            
              
              <a class="source" href="CullStack.html">
                CullStack.js
              </a>
            
              
              <a class="source" href="CullVisitor.html">
                CullVisitor.js
              </a>
            
              
              <a class="source" href="CullingSet.html">
                CullingSet.js
              </a>
            
              
              <a class="source" href="Depth.html">
                Depth.js
              </a>
            
              
              <a class="source" href="DrawArrayLengths.html">
                DrawArrayLengths.js
              </a>
            
              
              <a class="source" href="DrawArrays.html">
                DrawArrays.js
              </a>
            
              
              <a class="source" href="DrawElements.html">
                DrawElements.js
              </a>
            
              
              <a class="source" href="EllipsoidModel.html">
                EllipsoidModel.js
              </a>
            
              
              <a class="source" href="FrameBufferObject.html">
                FrameBufferObject.js
              </a>
            
              
              <a class="source" href="FrameStamp.html">
                FrameStamp.js
              </a>
            
              
              <a class="source" href="GLObject.html">
                GLObject.js
              </a>
            
              
              <a class="source" href="Geometry.html">
                Geometry.js
              </a>
            
              
              <a class="source" href="Image.html">
                Image.js
              </a>
            
              
              <a class="source" href="ImageStream.html">
                ImageStream.js
              </a>
            
              
              <a class="source" href="KdTree.html">
                KdTree.js
              </a>
            
              
              <a class="source" href="KdTreeBuilder.html">
                KdTreeBuilder.js
              </a>
            
              
              <a class="source" href="KdTreeRayIntersector.html">
                KdTreeRayIntersector.js
              </a>
            
              
              <a class="source" href="KdTreeSphereIntersector.html">
                KdTreeSphereIntersector.js
              </a>
            
              
              <a class="source" href="Light.html">
                Light.js
              </a>
            
              
              <a class="source" href="LightSource.html">
                LightSource.js
              </a>
            
              
              <a class="source" href="LineWidth.html">
                LineWidth.js
              </a>
            
              
              <a class="source" href="Lod.html">
                Lod.js
              </a>
            
              
              <a class="source" href="Map.html">
                Map.js
              </a>
            
              
              <a class="source" href="Material.html">
                Material.js
              </a>
            
              
              <a class="source" href="Math.html">
                Math.js
              </a>
            
              
              <a class="source" href="Matrix.html">
                Matrix.js
              </a>
            
              
              <a class="source" href="MatrixMemoryPool.html">
                MatrixMemoryPool.js
              </a>
            
              
              <a class="source" href="MatrixTransform.html">
                MatrixTransform.js
              </a>
            
              
              <a class="source" href="Node.html">
                Node.js
              </a>
            
              
              <a class="source" href="NodeVisitor.html">
                NodeVisitor.js
              </a>
            
              
              <a class="source" href="Notify.html">
                Notify.js
              </a>
            
              
              <a class="source" href="Object.html">
                Object.js
              </a>
            
              
              <a class="source" href="Options.html">
                Options.js
              </a>
            
              
              <a class="source" href="PagedLOD.html">
                PagedLOD.js
              </a>
            
              
              <a class="source" href="Plane.html">
                Plane.js
              </a>
            
              
              <a class="source" href="Polytope.html">
                Polytope.js
              </a>
            
              
              <a class="source" href="PrimitiveFunctor.html">
                PrimitiveFunctor.js
              </a>
            
              
              <a class="source" href="PrimitiveSet.html">
                PrimitiveSet.js
              </a>
            
              
              <a class="source" href="Program.html">
                Program.js
              </a>
            
              
              <a class="source" href="Projection.html">
                Projection.js
              </a>
            
              
              <a class="source" href="Quat.html">
                Quat.js
              </a>
            
              
              <a class="source" href="RenderBin.html">
                RenderBin.js
              </a>
            
              
              <a class="source" href="RenderLeaf.html">
                RenderLeaf.js
              </a>
            
              
              <a class="source" href="RenderStage.html">
                RenderStage.js
              </a>
            
              
              <a class="source" href="Shader.html">
                Shader.js
              </a>
            
              
              <a class="source" href="Shape.html">
                Shape.js
              </a>
            
              
              <a class="source" href="Stack.html">
                Stack.js
              </a>
            
              
              <a class="source" href="State.html">
                State.js
              </a>
            
              
              <a class="source" href="StateAttribute.html">
                StateAttribute.js
              </a>
            
              
              <a class="source" href="StateGraph.html">
                StateGraph.js
              </a>
            
              
              <a class="source" href="StateSet.html">
                StateSet.js
              </a>
            
              
              <a class="source" href="Texture.html">
                Texture.js
              </a>
            
              
              <a class="source" href="TextureCubeMap.html">
                TextureCubeMap.js
              </a>
            
              
              <a class="source" href="TextureManager.html">
                TextureManager.js
              </a>
            
              
              <a class="source" href="Timer.html">
                Timer.js
              </a>
            
              
              <a class="source" href="Transform.html">
                Transform.js
              </a>
            
              
              <a class="source" href="TransformEnums.html">
                TransformEnums.js
              </a>
            
              
              <a class="source" href="TriangleIndexFunctor.html">
                TriangleIndexFunctor.js
              </a>
            
              
              <a class="source" href="Uniform.html">
                Uniform.js
              </a>
            
              
              <a class="source" href="UpdateVisitor.html">
                UpdateVisitor.js
              </a>
            
              
              <a class="source" href="Utils.html">
                Utils.js
              </a>
            
              
              <a class="source" href="Vec2.html">
                Vec2.js
              </a>
            
              
              <a class="source" href="Vec3.html">
                Vec3.js
              </a>
            
              
              <a class="source" href="Vec4.html">
                Vec4.js
              </a>
            
              
              <a class="source" href="Viewport.html">
                Viewport.js
              </a>
            
              
              <a class="source" href="WebGLCaps.html">
                WebGLCaps.js
              </a>
            
              
              <a class="source" href="osg.html">
                osg.js
              </a>
            
              
              <a class="source" href="Animation.html">
                Animation.js
              </a>
            
              
              <a class="source" href="AnimationUpdateCallback.html">
                AnimationUpdateCallback.js
              </a>
            
              
              <a class="source" href="BasicAnimationManager.html">
                BasicAnimationManager.js
              </a>
            
              
              <a class="source" href="Bone.html">
                Bone.js
              </a>
            
              
              <a class="source" href="Channel.html">
                Channel.js
              </a>
            
              
              <a class="source" href="CollectAnimationUpdateCallbackVisitor.html">
                CollectAnimationUpdateCallbackVisitor.js
              </a>
            
              
              <a class="source" href="CollectBoneVisitor.html">
                CollectBoneVisitor.js
              </a>
            
              
              <a class="source" href="Easing.html">
                Easing.js
              </a>
            
              
              <a class="source" href="FindNearestParentSkeleton.html">
                FindNearestParentSkeleton.js
              </a>
            
              
              <a class="source" href="Interpolator.html">
                Interpolator.js
              </a>
            
              
              <a class="source" href="MorphAttribute.html">
                MorphAttribute.js
              </a>
            
              
              <a class="source" href="MorphGeometry.html">
                MorphGeometry.js
              </a>
            
              
              <a class="source" href="RigGeometry.html">
                RigGeometry.js
              </a>
            
              
              <a class="source" href="RigTransformHardware.html">
                RigTransformHardware.js
              </a>
            
              
              <a class="source" href="Skeleton.html">
                Skeleton.js
              </a>
            
              
              <a class="source" href="SkinningAttribute.html">
                SkinningAttribute.js
              </a>
            
              
              <a class="source" href="StackedMatrix.html">
                StackedMatrix.js
              </a>
            
              
              <a class="source" href="StackedQuaternion.html">
                StackedQuaternion.js
              </a>
            
              
              <a class="source" href="StackedRotateAxis.html">
                StackedRotateAxis.js
              </a>
            
              
              <a class="source" href="StackedScale.html">
                StackedScale.js
              </a>
            
              
              <a class="source" href="StackedTranslate.html">
                StackedTranslate.js
              </a>
            
              
              <a class="source" href="Target.html">
                Target.js
              </a>
            
              
              <a class="source" href="UpdateBone.html">
                UpdateBone.js
              </a>
            
              
              <a class="source" href="UpdateMatrixTransform.html">
                UpdateMatrixTransform.js
              </a>
            
              
              <a class="source" href="UpdateMorph.html">
                UpdateMorph.js
              </a>
            
              
              <a class="source" href="UpdateRigGeometry.html">
                UpdateRigGeometry.js
              </a>
            
              
              <a class="source" href="UpdateSkeleton.html">
                UpdateSkeleton.js
              </a>
            
              
              <a class="source" href="channelType.html">
                channelType.js
              </a>
            
              
              <a class="source" href="osgAnimation.html">
                osgAnimation.js
              </a>
            
              
              <a class="source" href="DatabasePager.html">
                DatabasePager.js
              </a>
            
              
              <a class="source" href="Input.html">
                Input.js
              </a>
            
              
              <a class="source" href="Options.html">
                Options.js
              </a>
            
              
              <a class="source" href="ReaderParser.html">
                ReaderParser.js
              </a>
            
              
              <a class="source" href="osgDB.html">
                osgDB.js
              </a>
            
              
              <a class="source" href="FirstPersonManipulator.html">
                FirstPersonManipulator.js
              </a>
            
              
              <a class="source" href="FirstPersonManipulatorDeviceOrientationController.html">
                FirstPersonManipulatorDeviceOrientationController.js
              </a>
            
              
              <a class="source" href="FirstPersonManipulatorHammerController.html">
                FirstPersonManipulatorHammerController.js
              </a>
            
              
              <a class="source" href="FirstPersonManipulatorStandardMouseKeyboardController.html">
                FirstPersonManipulatorStandardMouseKeyboardController.js
              </a>
            
              
              <a class="source" href="FirstPersonManipulatorWebVRController.html">
                FirstPersonManipulatorWebVRController.js
              </a>
            
              
              <a class="source" href="Manipulator.html">
                Manipulator.js
              </a>
            
              
              <a class="source" href="OrbitManipulator.html">
                OrbitManipulator.js
              </a>
            
              
              <a class="source" href="OrbitManipulatorDeviceOrientationController.html">
                OrbitManipulatorDeviceOrientationController.js
              </a>
            
              
              <a class="source" href="OrbitManipulatorEnums.html">
                OrbitManipulatorEnums.js
              </a>
            
              
              <a class="source" href="OrbitManipulatorGamePadController.html">
                OrbitManipulatorGamePadController.js
              </a>
            
              
              <a class="source" href="OrbitManipulatorHammerController.html">
                OrbitManipulatorHammerController.js
              </a>
            
              
              <a class="source" href="OrbitManipulatorLeapMotionController.html">
                OrbitManipulatorLeapMotionController.js
              </a>
            
              
              <a class="source" href="OrbitManipulatorStandardMouseKeyboardController.html">
                OrbitManipulatorStandardMouseKeyboardController.js
              </a>
            
              
              <a class="source" href="OrbitManipulatorWebVRController.html">
                OrbitManipulatorWebVRController.js
              </a>
            
              
              <a class="source" href="SwitchManipulator.html">
                SwitchManipulator.js
              </a>
            
              
              <a class="source" href="osgGA.html">
                osgGA.js
              </a>
            
              
              <a class="source" href="osgNameSpace.html">
                osgNameSpace.js
              </a>
            
              
              <a class="source" href="Compiler.html">
                Compiler.js
              </a>
            
              
              <a class="source" href="ShaderGenerator.html">
                ShaderGenerator.js
              </a>
            
              
              <a class="source" href="ShaderGeneratorProxy.html">
                ShaderGeneratorProxy.js
              </a>
            
              
              <a class="source" href="ShaderProcessor.html">
                ShaderProcessor.js
              </a>
            
              
              <a class="source" href="node.html">
                node.js
              </a>
            
              
              <a class="source" href="Node.html">
                Node.js
              </a>
            
              
              <a class="source" href="data.html">
                data.js
              </a>
            
              
              <a class="source" href="functions.html">
                functions.js
              </a>
            
              
              <a class="source" href="lights.html">
                lights.js
              </a>
            
              
              <a class="source" href="morph.html">
                morph.js
              </a>
            
              
              <a class="source" href="operations.html">
                operations.js
              </a>
            
              
              <a class="source" href="shadows.html">
                shadows.js
              </a>
            
              
              <a class="source" href="skinning.html">
                skinning.js
              </a>
            
              
              <a class="source" href="textures.html">
                textures.js
              </a>
            
              
              <a class="source" href="nodeFactory.html">
                nodeFactory.js
              </a>
            
              
              <a class="source" href="osgShader.html">
                osgShader.js
              </a>
            
              
              <a class="source" href="shaderLib.html">
                shaderLib.js
              </a>
            
              
              <a class="source" href="utils.html">
                utils.js
              </a>
            
              
              <a class="source" href="ShadowCastAttribute.html">
                ShadowCastAttribute.js
              </a>
            
              
              <a class="source" href="ShadowCastCompiler.html">
                ShadowCastCompiler.js
              </a>
            
              
              <a class="source" href="ShadowCastShaderGenerator.html">
                ShadowCastShaderGenerator.js
              </a>
            
              
              <a class="source" href="ShadowCasterVisitor.html">
                ShadowCasterVisitor.js
              </a>
            
              
              <a class="source" href="ShadowFrustumIntersection.html">
                ShadowFrustumIntersection.js
              </a>
            
              
              <a class="source" href="ShadowMap.html">
                ShadowMap.js
              </a>
            
              
              <a class="source" href="ShadowReceiveAttribute.html">
                ShadowReceiveAttribute.js
              </a>
            
              
              <a class="source" href="ShadowSettings.html">
                ShadowSettings.js
              </a>
            
              
              <a class="source" href="ShadowTechnique.html">
                ShadowTechnique.js
              </a>
            
              
              <a class="source" href="ShadowTexture.html">
                ShadowTexture.js
              </a>
            
              
              <a class="source" href="ShadowedScene.html">
                ShadowedScene.js
              </a>
            
              
              <a class="source" href="osgShadow.html">
                osgShadow.js
              </a>
            
              
              <a class="source" href="shaderLib.html">
                shaderLib.js
              </a>
            
              
              <a class="source" href="Text.html">
                Text.js
              </a>
            
              
              <a class="source" href="osgText.html">
                osgText.js
              </a>
            
              
              <a class="source" href="Composer.html">
                Composer.js
              </a>
            
              
              <a class="source" href="DisplayGeometryVisitor.html">
                DisplayGeometryVisitor.js
              </a>
            
              
              <a class="source" href="DisplayGraph.html">
                DisplayGraph.js
              </a>
            
              
              <a class="source" href="DisplayGraphNode.html">
                DisplayGraphNode.js
              </a>
            
              
              <a class="source" href="DisplayGraphRenderer.html">
                DisplayGraphRenderer.js
              </a>
            
              
              <a class="source" href="DisplayNormalVisitor.html">
                DisplayNormalVisitor.js
              </a>
            
              
              <a class="source" href="GizmoGeometry.html">
                GizmoGeometry.js
              </a>
            
              
              <a class="source" href="IntersectionVisitor.html">
                IntersectionVisitor.js
              </a>
            
              
              <a class="source" href="LineSegmentIntersector.html">
                LineSegmentIntersector.js
              </a>
            
              
              <a class="source" href="NodeGizmo.html">
                NodeGizmo.js
              </a>
            
              
              <a class="source" href="ParameterVisitor.html">
                ParameterVisitor.js
              </a>
            
              
              <a class="source" href="PolytopeIntersector.html">
                PolytopeIntersector.js
              </a>
            
              
              <a class="source" href="PolytopePrimitiveIntersector.html">
                PolytopePrimitiveIntersector.js
              </a>
            
              
              <a class="source" href="SphereIntersector.html">
                SphereIntersector.js
              </a>
            
              
              <a class="source" href="TangentSpaceGenerator.html">
                TangentSpaceGenerator.js
              </a>
            
              
              <a class="source" href="TriangleIntersector.html">
                TriangleIntersector.js
              </a>
            
              
              <a class="source" href="TriangleSphereIntersector.html">
                TriangleSphereIntersector.js
              </a>
            
              
              <a class="source" href="WebVR.html">
                WebVR.js
              </a>
            
              
              <a class="source" href="WebVRCustom.html">
                WebVRCustom.js
              </a>
            
              
              <a class="source" href="osgPool.html">
                osgPool.js
              </a>
            
              
              <a class="source" href="osgUtil.html">
                osgUtil.js
              </a>
            
              
              <a class="source" href="Renderer.html">
                Renderer.js
              </a>
            
              
              <a class="source" href="Scene.html">
                Scene.js
              </a>
            
              
              <a class="source" href="View.html">
                View.js
              </a>
            
              
              <a class="source" href="Viewer.html">
                Viewer.js
              </a>
            
              
              <a class="source" href="createStats.html">
                createStats.js
              </a>
            
              
              <a class="source" href="DeviceOrientation.html">
                DeviceOrientation.js
              </a>
            
              
              <a class="source" href="EventProxy.html">
                EventProxy.js
              </a>
            
              
              <a class="source" href="GamePad.html">
                GamePad.js
              </a>
            
              
              <a class="source" href="Hammer.html">
                Hammer.js
              </a>
            
              
              <a class="source" href="LeapMotion.html">
                LeapMotion.js
              </a>
            
              
              <a class="source" href="StandardMouseKeyboard.html">
                StandardMouseKeyboard.js
              </a>
            
              
              <a class="source" href="WebVR.html">
                WebVR.js
              </a>
            
              
              <a class="source" href="osgViewer.html">
                osgViewer.js
              </a>
            
              
              <a class="source" href="webgl-debug.html">
                webgl-debug.js
              </a>
            
              
              <a class="source" href="webgl-utils.html">
                webgl-utils.js
              </a>
            
              
              <a class="source" href="osgWrappers.html">
                osgWrappers.js
              </a>
            
              
              <a class="source" href="osg.html">
                osg.js
              </a>
            
              
              <a class="source" href="osgAnimation.html">
                osgAnimation.js
              </a>
            
              
              <a class="source" href="osgText.html">
                osgText.js
              </a>
            
          </div>
        </li>
      </ul>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>Polytope.js</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-meta">'use strict'</span>;
<span class="hljs-keyword">var</span> <span class="hljs-built_in">Object</span> = <span class="hljs-built_in">require</span>( <span class="hljs-string">'osg/Object'</span> );
<span class="hljs-keyword">var</span> Plane = <span class="hljs-built_in">require</span>( <span class="hljs-string">'osg/Plane'</span> );
<span class="hljs-keyword">var</span> MACROUTILS = <span class="hljs-built_in">require</span>( <span class="hljs-string">'osg/Utils'</span> );
<span class="hljs-keyword">var</span> Vec4 = <span class="hljs-built_in">require</span>( <span class="hljs-string">'osg/Vec4'</span> );
<span class="hljs-comment">/*jshint bitwise: false */</span>
<span class="hljs-comment">/**
 * Polytope class for representing convex clipping volumes made up of a set of planes.
 * When adding planes, their normals should point inwards (into the volume)
 * @class Polytope
 */</span>
<span class="hljs-keyword">var</span> Polytope = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{

    <span class="hljs-keyword">this</span>._clippingMask = <span class="hljs-number">0x0</span>;

    <span class="hljs-keyword">this</span>._planeList = [ Plane.create(), Plane.create(), Plane.create(), Plane.create(), Plane.create(), Plane.create() ];
    <span class="hljs-keyword">this</span>._vertexList = [];</pre></div></div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <p>stack of clipping masks</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">this</span>._maskStack = [];</pre></div></div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <p>init with a clear mask</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">this</span>._resultMask = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">this</span>._maskStack.push( <span class="hljs-keyword">this</span>._resultMask );
};

Polytope.prototype = MACROUTILS.objectInherit( <span class="hljs-built_in">Object</span>.prototype, {


    getPlanes: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._planeList;
    },

    setPlanes: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"> pl </span>) </span>{
        <span class="hljs-keyword">this</span>._planeList = pl;
        <span class="hljs-keyword">this</span>.setupMask();
    },

    clear: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{

        <span class="hljs-keyword">this</span>._clippingMask = <span class="hljs-number">0x0</span>;
        <span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>._planeList ) {
            <span class="hljs-keyword">for</span> ( <span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>, l = <span class="hljs-keyword">this</span>._planeList.length; i &lt; l; ++i ) {
                Plane.init( <span class="hljs-keyword">this</span>._planeList[ i ] );
            }
        }
        <span class="hljs-keyword">this</span>._vertexList = [];
        <span class="hljs-keyword">this</span>.setupMask();

    },

    <span class="hljs-comment">/** Create a Polytope which is a cube, centered at 0,0,0, with sides of 2 units.*/</span>
    setToUnitFrustum: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"> withNear, withFar </span>) </span>{
        <span class="hljs-keyword">if</span> ( withNear === <span class="hljs-literal">undefined</span> ) withNear = <span class="hljs-literal">true</span>;

        <span class="hljs-keyword">if</span> ( withFar === <span class="hljs-literal">undefined</span> ) withFar = <span class="hljs-literal">true</span>;

        <span class="hljs-keyword">this</span>._planeList.length = <span class="hljs-number">0</span>;
        <span class="hljs-keyword">this</span>._planeList.push( Vec4.set( <span class="hljs-number">1.0</span>, <span class="hljs-number">0.0</span>, <span class="hljs-number">0.0</span>, <span class="hljs-number">1.0</span>, Plane.create() ) ); <span class="hljs-comment">// left plane.</span>
        <span class="hljs-keyword">this</span>._planeList.push( Vec4.set( <span class="hljs-number">-1.0</span>, <span class="hljs-number">0.0</span>, <span class="hljs-number">0.0</span>, <span class="hljs-number">1.0</span>, Plane.create() ) ); <span class="hljs-comment">// right plane.</span>
        <span class="hljs-keyword">this</span>._planeList.push( Vec4.set( <span class="hljs-number">0.0</span>, <span class="hljs-number">1.0</span>, <span class="hljs-number">0.0</span>, <span class="hljs-number">1.0</span>, Plane.create() ) ); <span class="hljs-comment">// bottom plane.</span>
        <span class="hljs-keyword">this</span>._planeList.push( Vec4.set( <span class="hljs-number">0.0</span>, <span class="hljs-number">-1.0</span>, <span class="hljs-number">0.0</span>, <span class="hljs-number">1.0</span>, Plane.create() ) ); <span class="hljs-comment">// top plane.</span>
        <span class="hljs-keyword">if</span> ( withNear ) <span class="hljs-keyword">this</span>._planeList.push( Vec4.set( <span class="hljs-number">0.0</span>, <span class="hljs-number">0.0</span>, <span class="hljs-number">1.0</span>, <span class="hljs-number">1.0</span>, Plane.create() ) ); <span class="hljs-comment">// near plane</span>
        <span class="hljs-keyword">if</span> ( withFar ) <span class="hljs-keyword">this</span>._planeList.push( Vec4.set( <span class="hljs-number">0.0</span>, <span class="hljs-number">0.0</span>, <span class="hljs-number">-1.0</span>, <span class="hljs-number">1.0</span>, Plane.create() ) ); <span class="hljs-comment">// far plane</span>
        <span class="hljs-keyword">this</span>.setupMask();
    },


    <span class="hljs-comment">/** Create a Polytope which is a equivalent to BoundingBox.*/</span>
    setToBoundingBox: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"> bb </span>) </span>{
        <span class="hljs-keyword">this</span>._planeList.length = <span class="hljs-number">0</span>;
        <span class="hljs-keyword">this</span>._planeList.push( Vec4.set( <span class="hljs-number">1.0</span>, <span class="hljs-number">0.0</span>, <span class="hljs-number">0.0</span>, -bb.getMin()[ <span class="hljs-number">0</span> ], Plane.create() ) ); <span class="hljs-comment">// left plane.</span>
        <span class="hljs-keyword">this</span>._planeList.push( Vec4.set( <span class="hljs-number">-1.0</span>, <span class="hljs-number">0.0</span>, <span class="hljs-number">0.0</span>, bb.getMax()[ <span class="hljs-number">0</span> ], Plane.create() ) ); <span class="hljs-comment">// right plane.</span>
        <span class="hljs-keyword">this</span>._planeList.push( Vec4.set( <span class="hljs-number">0.0</span>, <span class="hljs-number">1.0</span>, <span class="hljs-number">0.0</span>, -bb.getMin()[ <span class="hljs-number">1</span> ], Plane.create() ) ); <span class="hljs-comment">// bottom plane.</span>
        <span class="hljs-keyword">this</span>._planeList.push( Vec4.set( <span class="hljs-number">0.0</span>, <span class="hljs-number">-1.0</span>, <span class="hljs-number">0.0</span>, bb.getMax()[ <span class="hljs-number">1</span> ], Plane.create() ) ); <span class="hljs-comment">// top plane.</span>
        <span class="hljs-keyword">this</span>._planeList.push( Vec4.set( <span class="hljs-number">0.0</span>, <span class="hljs-number">0.0</span>, <span class="hljs-number">1.0</span>, -bb.getMin()[ <span class="hljs-number">2</span> ], Plane.create() ) ); <span class="hljs-comment">// near plane</span>
        <span class="hljs-keyword">this</span>._planeList.push( Vec4.set( <span class="hljs-number">0.0</span>, <span class="hljs-number">0.0</span>, <span class="hljs-number">-1.0</span>, bb.getMax()[ <span class="hljs-number">2</span> ], Plane.create() ) ); <span class="hljs-comment">// far plane</span>
        <span class="hljs-keyword">this</span>.setupMask();
    },

    setAndTransformProvidingInverse: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"> pt, matrix </span>) </span>{
        <span class="hljs-keyword">this</span>._referenceVertexList = pt._referenceVertexList;
        <span class="hljs-keyword">var</span> resultMask = pt._maskStack[ <span class="hljs-keyword">this</span>._maskStack.length - <span class="hljs-number">1</span> ];
        <span class="hljs-keyword">if</span> ( resultMask === <span class="hljs-number">0</span> ) {
            <span class="hljs-keyword">this</span>._maskStack[ <span class="hljs-keyword">this</span>._maskStack.length - <span class="hljs-number">1</span> ] = <span class="hljs-number">0</span>;
            <span class="hljs-keyword">this</span>._resultMask = <span class="hljs-number">0</span>;
            <span class="hljs-keyword">this</span>._planeList.length = <span class="hljs-number">0</span>;
            <span class="hljs-keyword">return</span>;
        }
        <span class="hljs-keyword">var</span> selectorMask = <span class="hljs-number">0x1</span>;

        <span class="hljs-keyword">var</span> numActivePlanes = <span class="hljs-number">0</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <p>count number of active planes.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">var</span> i;
        <span class="hljs-keyword">for</span> ( i = <span class="hljs-number">0</span>; i !== pt._planeList.length; ++i ) {
            <span class="hljs-keyword">if</span> ( resultMask &amp; selectorMask ) ++numActivePlanes;
            selectorMask &lt;&lt;= <span class="hljs-number">1</span>;
        }

        <span class="hljs-keyword">this</span>._planeList.length = numActivePlanes;
        <span class="hljs-keyword">this</span>._resultMask = <span class="hljs-number">0</span>;
        selectorMask = <span class="hljs-number">0x1</span>;
        <span class="hljs-keyword">var</span> index = <span class="hljs-number">0</span>;
        <span class="hljs-keyword">for</span> ( i = <span class="hljs-number">0</span>; i !== pt._planeList.length; ++i ) {
            <span class="hljs-keyword">if</span> ( resultMask &amp; selectorMask ) {
                <span class="hljs-keyword">this</span>._planeList[ index ] = pt._planeList[ i ];
                Plane.transformProvidingInverse( <span class="hljs-keyword">this</span>._planeList[ index++ ], matrix );
                <span class="hljs-keyword">this</span>._resultMask = ( <span class="hljs-keyword">this</span>._resultMask &lt;&lt; <span class="hljs-number">1</span> ) | <span class="hljs-number">1</span>;
            }
            selectorMask &lt;&lt;= <span class="hljs-number">1</span>;
        }

        <span class="hljs-keyword">this</span>._maskStack[ <span class="hljs-keyword">this</span>._maskStack.length - <span class="hljs-number">1</span> ] = <span class="hljs-keyword">this</span>._resultMask;
    },

    voidset: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"> pl </span>) </span>{
        <span class="hljs-keyword">this</span>._planeList = pl;
        <span class="hljs-keyword">this</span>.setupMask();
    },


    add: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"> pl </span>) </span>{
        <span class="hljs-keyword">this</span>._planeList.push( pl );
        <span class="hljs-keyword">this</span>.setupMask();
    },

    empty: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._planeList.length === <span class="hljs-number">0</span>;
    },

    getPlaneList: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._planeList;
    },

    setReferenceVertexList: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"> vertices </span>) </span>{
        <span class="hljs-keyword">this</span>._referenceVertexList = vertices;
    },

    getReferenceVertexList: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._referenceVertexList;
    },

    setupMask: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"> plength </span>) </span>{
        <span class="hljs-keyword">this</span>._resultMask = <span class="hljs-number">0</span>;
        <span class="hljs-keyword">var</span> pMasklength = ( plength !== <span class="hljs-literal">undefined</span> ) ? plength : <span class="hljs-keyword">this</span>._planeList.length;
        <span class="hljs-keyword">for</span> ( <span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; pMasklength; ++i ) {
            <span class="hljs-keyword">this</span>._resultMask = ( <span class="hljs-keyword">this</span>._resultMask &lt;&lt; <span class="hljs-number">1</span> ) | <span class="hljs-number">1</span>;
        }
        <span class="hljs-keyword">this</span>._maskStack = [];
        <span class="hljs-keyword">this</span>._maskStack.push( <span class="hljs-keyword">this</span>._resultMask );
    },

    getCurrentMask: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._maskStack[ <span class="hljs-keyword">this</span>._maskStack.length - <span class="hljs-number">1</span> ];
    },

    setResultMask: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"> mask </span>) </span>{
        <span class="hljs-keyword">this</span>._resultMask = mask;
    },

    getResultMask: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._resultMask;
    },

    getMaskStack: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._maskStack;
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <p>push but keep current mask</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    pushCurrentMask: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>._maskStack.push( <span class="hljs-keyword">this</span>._resultMask );
    },</pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <p>pop and restore previous mask</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    popCurrentMask: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._maskStack.pop();
    },


    <span class="hljs-comment">/** Check whether a vertex is contained within clipping set.*/</span>
    containsVertex: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"> v </span>) </span>{
        <span class="hljs-keyword">if</span> ( !<span class="hljs-keyword">this</span>._maskStack[ <span class="hljs-keyword">this</span>._maskStack.length - <span class="hljs-number">1</span> ] ) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;

        <span class="hljs-keyword">var</span> selectorMask = <span class="hljs-number">0x1</span>;
        <span class="hljs-keyword">for</span> ( <span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-keyword">this</span>._planeList.length; ++i ) {
            <span class="hljs-keyword">if</span> ( ( <span class="hljs-keyword">this</span>._maskStack[ <span class="hljs-keyword">this</span>._maskStack.length - <span class="hljs-number">1</span> ] &amp; selectorMask ) &amp;&amp; ( Plane.distanceToPlane( <span class="hljs-keyword">this</span>._planeList[ i ], v ) &lt; <span class="hljs-number">0.0</span> ) ) {
                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
            }
            selectorMask &lt;&lt;= <span class="hljs-number">1</span>;
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    },

    <span class="hljs-comment">/** Check whether any part of vertex list is contained within clipping set.*/</span>
    containsVertices: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"> vertices </span>) </span>{
        <span class="hljs-keyword">if</span> ( !<span class="hljs-keyword">this</span>._maskStack[ <span class="hljs-keyword">this</span>._maskStack.length - <span class="hljs-number">1</span> ] ) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;

        <span class="hljs-keyword">this</span>._resultMask = <span class="hljs-keyword">this</span>._maskStack[ <span class="hljs-keyword">this</span>._maskStack.length - <span class="hljs-number">1</span> ];

        <span class="hljs-keyword">for</span> ( <span class="hljs-keyword">var</span> k = <span class="hljs-number">0</span>; k &lt; vertices.length; ++k ) {
            <span class="hljs-keyword">var</span> v = vertices[ k ];
            <span class="hljs-keyword">var</span> outside = <span class="hljs-literal">false</span>;
            <span class="hljs-keyword">var</span> selectorMask = <span class="hljs-number">0x1</span>;
            <span class="hljs-keyword">for</span> ( <span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; !outside &amp;&amp; i &lt; <span class="hljs-keyword">this</span>._planeList.length; ++i ) {
                <span class="hljs-keyword">if</span> ( ( <span class="hljs-keyword">this</span>._maskStack[ <span class="hljs-keyword">this</span>._maskStack.length - <span class="hljs-number">1</span> ] &amp; selectorMask ) &amp;&amp; ( Plane.distanceToPlane( <span class="hljs-keyword">this</span>._planeList[ i ], v ) &lt; <span class="hljs-number">0.0</span> ) ) {
                    outside = <span class="hljs-literal">true</span>;
                }
                selectorMask &lt;&lt;= <span class="hljs-number">1</span>;
            }

            <span class="hljs-keyword">if</span> ( !outside ) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    },

    <span class="hljs-comment">/** Check whether any part of a bounding sphere is contained within clipping set.
        Using a mask to determine which planes should be used for the check, and
        modifying the mask to turn off planes which wouldn't contribute to clipping
        of any internal objects.  This feature is used in osgUtil::CullVisitor
        to prevent redundant plane checking.*/</span>
    containsBoundingSphere: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"> bs </span>) </span>{
        <span class="hljs-keyword">if</span> ( !<span class="hljs-keyword">this</span>._maskStack[ <span class="hljs-keyword">this</span>._maskStack.length - <span class="hljs-number">1</span> ] || !bs.valid() ) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;

        <span class="hljs-keyword">this</span>._resultMask = <span class="hljs-keyword">this</span>._maskStack[ <span class="hljs-keyword">this</span>._maskStack.length - <span class="hljs-number">1</span> ];
        <span class="hljs-keyword">var</span> selectorMask = <span class="hljs-number">0x1</span>;

        <span class="hljs-keyword">for</span> ( <span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-keyword">this</span>._planeList.length; ++i ) {
            <span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>._resultMask &amp; selectorMask ) {
                <span class="hljs-keyword">var</span> res = Plane.intersectsOrContainsBoundingSphere( <span class="hljs-keyword">this</span>._planeList[ i ], bs );
                <span class="hljs-keyword">if</span> ( Plane.OUTSIDE === res ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <p>totally outside a clipping set.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
                } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( Plane.INSIDE === res ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <p>subsequent checks against this plane not required.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                    <span class="hljs-keyword">this</span>._resultMask ^= selectorMask;
                }</pre></div></div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              <p>else if ( Plane.INTERSECT === res ) { // last possible case
  can say nothing.
subsequent checks against this plane needed.
}</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            }
            selectorMask &lt;&lt;= <span class="hljs-number">1</span>;
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    },

    <span class="hljs-comment">/** Check whether any part of a bounding box is contained within clipping set.
        Using a mask to determine which planes should be used for the check, and
        modifying the mask to turn off planes which wouldn't contribute to clipping
        of any internal objects.  This feature is used in osgUtil::CullVisitor
        to prevent redundant plane checking.*/</span>
    containsBoundingBox: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"> bb </span>) </span>{
        <span class="hljs-keyword">if</span> ( !<span class="hljs-keyword">this</span>._maskStack[ <span class="hljs-keyword">this</span>._maskStack.length - <span class="hljs-number">1</span> ] ) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;

        <span class="hljs-keyword">this</span>._resultMask = <span class="hljs-keyword">this</span>._maskStack[ <span class="hljs-keyword">this</span>._maskStack.length - <span class="hljs-number">1</span> ];
        <span class="hljs-keyword">var</span> selectorMask = <span class="hljs-number">0x1</span>;

        <span class="hljs-keyword">for</span> ( <span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-keyword">this</span>._planeList.length; ++i ) {
            <span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>._resultMask &amp; selectorMask ) {
                <span class="hljs-keyword">var</span> res = Plane.intersectsOrContainsBoundingBox( <span class="hljs-keyword">this</span>._planeList[ i ], bb );
                <span class="hljs-keyword">if</span> ( Plane.OUTSIDE === res ) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>; <span class="hljs-comment">// outside clipping set.</span>
                <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> ( Plane.INSIDE === res ) <span class="hljs-keyword">this</span>._resultMask ^= selectorMask; <span class="hljs-comment">// subsequent checks against this plane not required.</span></pre></div></div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              <p>else if ( Plane.INTERSECT === res ) the last case need
no test here but further tests</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            }
            selectorMask &lt;&lt;= <span class="hljs-number">1</span>;
        }</pre></div></div>
            
        </li>
        
        
        <li id="section-11">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-11">&#182;</a>
              </div>
              <p>correct frustum culling should double check now for
<a href="http://www.iquilezles.org/www/articles/frustumcorrect/frustumcorrect.htm">http://www.iquilezles.org/www/articles/frustumcorrect/frustumcorrect.htm</a>
which is inside one plane, but outside the convex plane intersection</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    },

    <span class="hljs-comment">/** Check whether all of vertex list is contained with clipping set.*/</span>
    containsAllOfVertices: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"> vertices </span>) </span>{
        <span class="hljs-keyword">if</span> ( !<span class="hljs-keyword">this</span>._maskStack[ <span class="hljs-keyword">this</span>._maskStack.length - <span class="hljs-number">1</span> ] ) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;

        <span class="hljs-keyword">this</span>._resultMask = <span class="hljs-keyword">this</span>._maskStack[ <span class="hljs-keyword">this</span>._maskStack.length - <span class="hljs-number">1</span> ];
        <span class="hljs-keyword">var</span> selectorMask = <span class="hljs-number">0x1</span>;

        <span class="hljs-keyword">for</span> ( <span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-keyword">this</span>._planeList.length; ++i ) {
            <span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>._resultMask &amp; selectorMask ) {
                <span class="hljs-keyword">var</span> res = Plane.intersectsOrContainsVertices( <span class="hljs-keyword">this</span>._planeList[ i ], vertices );
                <span class="hljs-keyword">if</span> ( res &lt; <span class="hljs-number">1</span> ) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>; <span class="hljs-comment">// intersects, or is below plane.</span>
                <span class="hljs-keyword">this</span>._resultMask ^= selectorMask; <span class="hljs-comment">// subsequent checks against this plane not required.</span>
            }
            selectorMask &lt;&lt;= <span class="hljs-number">1</span>;
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    },

    <span class="hljs-comment">/** Check whether the entire bounding sphere is contained within clipping set.*/</span>
    containsAllOfBoundingSphere: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"> bs </span>) </span>{
        <span class="hljs-keyword">if</span> ( !<span class="hljs-keyword">this</span>._maskStack[ <span class="hljs-keyword">this</span>._maskStack.length - <span class="hljs-number">1</span> ] ) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;

        <span class="hljs-keyword">this</span>._resultMask = <span class="hljs-keyword">this</span>._maskStack[ <span class="hljs-keyword">this</span>._maskStack.length - <span class="hljs-number">1</span> ];
        <span class="hljs-keyword">var</span> selectorMask = <span class="hljs-number">0x1</span>;

        <span class="hljs-keyword">for</span> ( <span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-keyword">this</span>._planeList.length; ++i ) {
            <span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>._resultMask &amp; selectorMask ) {
                <span class="hljs-keyword">var</span> res = Plane.intersectsOrContainsBoundingSphere( <span class="hljs-keyword">this</span>._planeList[ i ], bs );
                <span class="hljs-keyword">if</span> ( res &lt; <span class="hljs-number">1</span> ) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>; <span class="hljs-comment">// intersects, or is below plane.</span>
                <span class="hljs-keyword">this</span>._resultMask ^= selectorMask; <span class="hljs-comment">// subsequent checks against this plane not required.</span>
            }
            selectorMask &lt;&lt;= <span class="hljs-number">1</span>;
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    },

    <span class="hljs-comment">/** Check whether the entire bounding box is contained within clipping set.*/</span>
    containsAllOfBoundingBox: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"> bbox </span>) </span>{
        <span class="hljs-keyword">if</span> ( !<span class="hljs-keyword">this</span>._maskStack[ <span class="hljs-keyword">this</span>._maskStack.length - <span class="hljs-number">1</span> ] ) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;

        <span class="hljs-keyword">this</span>._resultMask = <span class="hljs-keyword">this</span>._maskStack[ <span class="hljs-keyword">this</span>._maskStack.length - <span class="hljs-number">1</span> ];
        <span class="hljs-keyword">var</span> selectorMask = <span class="hljs-number">0x1</span>;

        <span class="hljs-keyword">for</span> ( <span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-keyword">this</span>._planeList.length; ++i ) {
            <span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>._resultMask &amp; selectorMask ) {
                <span class="hljs-keyword">var</span> res = Plane.intersectsOrContainsBoundingBox( <span class="hljs-keyword">this</span>._planeList[ i ], bbox );
                <span class="hljs-keyword">if</span> ( res &lt; <span class="hljs-number">1</span> ) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>; <span class="hljs-comment">// intersects, or is below plane.</span>
                <span class="hljs-keyword">this</span>._resultMask ^= selectorMask; <span class="hljs-comment">// subsequent checks against this plane not required.</span>
            }
            selectorMask &lt;&lt;= <span class="hljs-number">1</span>;
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    },

    <span class="hljs-comment">/** Transform the clipping set by provide a pre inverted matrix.
     * see transform for details. */</span>
    transformProvidingInverse: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"> matrix </span>) </span>{
        <span class="hljs-keyword">if</span> ( !<span class="hljs-keyword">this</span>._maskStack[ <span class="hljs-keyword">this</span>._maskStack.length - <span class="hljs-number">1</span> ] ) <span class="hljs-keyword">return</span>;

        <span class="hljs-keyword">this</span>._resultMask = <span class="hljs-keyword">this</span>._maskStack[ <span class="hljs-keyword">this</span>._maskStack.length - <span class="hljs-number">1</span> ];
        <span class="hljs-keyword">var</span> selectorMask = <span class="hljs-number">0x1</span>;
        <span class="hljs-keyword">for</span> ( <span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-keyword">this</span>._planeList.length; ++i ) {
            <span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>._resultMask &amp; selectorMask ) {
                Plane.transformProvidingInverse( <span class="hljs-keyword">this</span>._planeList[ i ], matrix );
                selectorMask &lt;&lt;= <span class="hljs-number">1</span>;
            }
        }
    }



} );

<span class="hljs-comment">/*jshint bitwise: true */</span>

<span class="hljs-built_in">module</span>.exports = Polytope;</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
