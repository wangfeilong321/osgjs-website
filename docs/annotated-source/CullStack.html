<!DOCTYPE html>

<html>
<head>
  <title>CullStack.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
      <ul id="jump_to">
        <li>
          <a class="large" href="javascript:void(0);">Jump To &hellip;</a>
          <a class="small" href="javascript:void(0);">+</a>
          <div id="jump_wrapper">
          <div id="jump_page">
            
              
              <a class="source" href="OSG.html">
                OSG.js
              </a>
            
              
              <a class="source" href="BillboardAttribute.html">
                BillboardAttribute.js
              </a>
            
              
              <a class="source" href="BlendColor.html">
                BlendColor.js
              </a>
            
              
              <a class="source" href="BlendFunc.html">
                BlendFunc.js
              </a>
            
              
              <a class="source" href="BoundingBox.html">
                BoundingBox.js
              </a>
            
              
              <a class="source" href="BoundingSphere.html">
                BoundingSphere.js
              </a>
            
              
              <a class="source" href="BufferArray.html">
                BufferArray.js
              </a>
            
              
              <a class="source" href="BufferArrayProxy.html">
                BufferArrayProxy.js
              </a>
            
              
              <a class="source" href="Camera.html">
                Camera.js
              </a>
            
              
              <a class="source" href="ColorMask.html">
                ColorMask.js
              </a>
            
              
              <a class="source" href="ComputeBoundsVisitor.html">
                ComputeBoundsVisitor.js
              </a>
            
              
              <a class="source" href="ComputeMatrixFromNodePath.html">
                ComputeMatrixFromNodePath.js
              </a>
            
              
              <a class="source" href="CullFace.html">
                CullFace.js
              </a>
            
              
              <a class="source" href="CullSettings.html">
                CullSettings.js
              </a>
            
              
              <a class="source" href="CullStack.html">
                CullStack.js
              </a>
            
              
              <a class="source" href="CullVisitor.html">
                CullVisitor.js
              </a>
            
              
              <a class="source" href="CullingSet.html">
                CullingSet.js
              </a>
            
              
              <a class="source" href="Depth.html">
                Depth.js
              </a>
            
              
              <a class="source" href="DrawArrayLengths.html">
                DrawArrayLengths.js
              </a>
            
              
              <a class="source" href="DrawArrays.html">
                DrawArrays.js
              </a>
            
              
              <a class="source" href="DrawElements.html">
                DrawElements.js
              </a>
            
              
              <a class="source" href="EllipsoidModel.html">
                EllipsoidModel.js
              </a>
            
              
              <a class="source" href="FrameBufferObject.html">
                FrameBufferObject.js
              </a>
            
              
              <a class="source" href="FrameStamp.html">
                FrameStamp.js
              </a>
            
              
              <a class="source" href="GLObject.html">
                GLObject.js
              </a>
            
              
              <a class="source" href="Geometry.html">
                Geometry.js
              </a>
            
              
              <a class="source" href="Image.html">
                Image.js
              </a>
            
              
              <a class="source" href="ImageStream.html">
                ImageStream.js
              </a>
            
              
              <a class="source" href="KdTree.html">
                KdTree.js
              </a>
            
              
              <a class="source" href="KdTreeBuilder.html">
                KdTreeBuilder.js
              </a>
            
              
              <a class="source" href="KdTreeRayIntersector.html">
                KdTreeRayIntersector.js
              </a>
            
              
              <a class="source" href="KdTreeSphereIntersector.html">
                KdTreeSphereIntersector.js
              </a>
            
              
              <a class="source" href="Light.html">
                Light.js
              </a>
            
              
              <a class="source" href="LightSource.html">
                LightSource.js
              </a>
            
              
              <a class="source" href="LineWidth.html">
                LineWidth.js
              </a>
            
              
              <a class="source" href="Lod.html">
                Lod.js
              </a>
            
              
              <a class="source" href="Map.html">
                Map.js
              </a>
            
              
              <a class="source" href="Material.html">
                Material.js
              </a>
            
              
              <a class="source" href="Math.html">
                Math.js
              </a>
            
              
              <a class="source" href="Matrix.html">
                Matrix.js
              </a>
            
              
              <a class="source" href="MatrixMemoryPool.html">
                MatrixMemoryPool.js
              </a>
            
              
              <a class="source" href="MatrixTransform.html">
                MatrixTransform.js
              </a>
            
              
              <a class="source" href="Node.html">
                Node.js
              </a>
            
              
              <a class="source" href="NodeVisitor.html">
                NodeVisitor.js
              </a>
            
              
              <a class="source" href="Notify.html">
                Notify.js
              </a>
            
              
              <a class="source" href="Object.html">
                Object.js
              </a>
            
              
              <a class="source" href="Options.html">
                Options.js
              </a>
            
              
              <a class="source" href="PagedLOD.html">
                PagedLOD.js
              </a>
            
              
              <a class="source" href="Plane.html">
                Plane.js
              </a>
            
              
              <a class="source" href="Polytope.html">
                Polytope.js
              </a>
            
              
              <a class="source" href="PrimitiveFunctor.html">
                PrimitiveFunctor.js
              </a>
            
              
              <a class="source" href="PrimitiveSet.html">
                PrimitiveSet.js
              </a>
            
              
              <a class="source" href="Program.html">
                Program.js
              </a>
            
              
              <a class="source" href="Projection.html">
                Projection.js
              </a>
            
              
              <a class="source" href="Quat.html">
                Quat.js
              </a>
            
              
              <a class="source" href="RenderBin.html">
                RenderBin.js
              </a>
            
              
              <a class="source" href="RenderLeaf.html">
                RenderLeaf.js
              </a>
            
              
              <a class="source" href="RenderStage.html">
                RenderStage.js
              </a>
            
              
              <a class="source" href="Shader.html">
                Shader.js
              </a>
            
              
              <a class="source" href="Shape.html">
                Shape.js
              </a>
            
              
              <a class="source" href="Stack.html">
                Stack.js
              </a>
            
              
              <a class="source" href="State.html">
                State.js
              </a>
            
              
              <a class="source" href="StateAttribute.html">
                StateAttribute.js
              </a>
            
              
              <a class="source" href="StateGraph.html">
                StateGraph.js
              </a>
            
              
              <a class="source" href="StateSet.html">
                StateSet.js
              </a>
            
              
              <a class="source" href="Texture.html">
                Texture.js
              </a>
            
              
              <a class="source" href="TextureCubeMap.html">
                TextureCubeMap.js
              </a>
            
              
              <a class="source" href="TextureManager.html">
                TextureManager.js
              </a>
            
              
              <a class="source" href="Timer.html">
                Timer.js
              </a>
            
              
              <a class="source" href="Transform.html">
                Transform.js
              </a>
            
              
              <a class="source" href="TransformEnums.html">
                TransformEnums.js
              </a>
            
              
              <a class="source" href="TriangleIndexFunctor.html">
                TriangleIndexFunctor.js
              </a>
            
              
              <a class="source" href="Uniform.html">
                Uniform.js
              </a>
            
              
              <a class="source" href="UpdateVisitor.html">
                UpdateVisitor.js
              </a>
            
              
              <a class="source" href="Utils.html">
                Utils.js
              </a>
            
              
              <a class="source" href="Vec2.html">
                Vec2.js
              </a>
            
              
              <a class="source" href="Vec3.html">
                Vec3.js
              </a>
            
              
              <a class="source" href="Vec4.html">
                Vec4.js
              </a>
            
              
              <a class="source" href="Viewport.html">
                Viewport.js
              </a>
            
              
              <a class="source" href="WebGLCaps.html">
                WebGLCaps.js
              </a>
            
              
              <a class="source" href="osg.html">
                osg.js
              </a>
            
              
              <a class="source" href="Animation.html">
                Animation.js
              </a>
            
              
              <a class="source" href="AnimationUpdateCallback.html">
                AnimationUpdateCallback.js
              </a>
            
              
              <a class="source" href="BasicAnimationManager.html">
                BasicAnimationManager.js
              </a>
            
              
              <a class="source" href="Bone.html">
                Bone.js
              </a>
            
              
              <a class="source" href="Channel.html">
                Channel.js
              </a>
            
              
              <a class="source" href="CollectAnimationUpdateCallbackVisitor.html">
                CollectAnimationUpdateCallbackVisitor.js
              </a>
            
              
              <a class="source" href="CollectBoneVisitor.html">
                CollectBoneVisitor.js
              </a>
            
              
              <a class="source" href="Easing.html">
                Easing.js
              </a>
            
              
              <a class="source" href="FindNearestParentSkeleton.html">
                FindNearestParentSkeleton.js
              </a>
            
              
              <a class="source" href="Interpolator.html">
                Interpolator.js
              </a>
            
              
              <a class="source" href="MorphAttribute.html">
                MorphAttribute.js
              </a>
            
              
              <a class="source" href="MorphGeometry.html">
                MorphGeometry.js
              </a>
            
              
              <a class="source" href="RigGeometry.html">
                RigGeometry.js
              </a>
            
              
              <a class="source" href="RigTransformHardware.html">
                RigTransformHardware.js
              </a>
            
              
              <a class="source" href="Skeleton.html">
                Skeleton.js
              </a>
            
              
              <a class="source" href="SkinningAttribute.html">
                SkinningAttribute.js
              </a>
            
              
              <a class="source" href="StackedMatrix.html">
                StackedMatrix.js
              </a>
            
              
              <a class="source" href="StackedQuaternion.html">
                StackedQuaternion.js
              </a>
            
              
              <a class="source" href="StackedRotateAxis.html">
                StackedRotateAxis.js
              </a>
            
              
              <a class="source" href="StackedScale.html">
                StackedScale.js
              </a>
            
              
              <a class="source" href="StackedTranslate.html">
                StackedTranslate.js
              </a>
            
              
              <a class="source" href="Target.html">
                Target.js
              </a>
            
              
              <a class="source" href="UpdateBone.html">
                UpdateBone.js
              </a>
            
              
              <a class="source" href="UpdateMatrixTransform.html">
                UpdateMatrixTransform.js
              </a>
            
              
              <a class="source" href="UpdateMorph.html">
                UpdateMorph.js
              </a>
            
              
              <a class="source" href="UpdateRigGeometry.html">
                UpdateRigGeometry.js
              </a>
            
              
              <a class="source" href="UpdateSkeleton.html">
                UpdateSkeleton.js
              </a>
            
              
              <a class="source" href="channelType.html">
                channelType.js
              </a>
            
              
              <a class="source" href="osgAnimation.html">
                osgAnimation.js
              </a>
            
              
              <a class="source" href="DatabasePager.html">
                DatabasePager.js
              </a>
            
              
              <a class="source" href="Input.html">
                Input.js
              </a>
            
              
              <a class="source" href="Options.html">
                Options.js
              </a>
            
              
              <a class="source" href="ReaderParser.html">
                ReaderParser.js
              </a>
            
              
              <a class="source" href="osgDB.html">
                osgDB.js
              </a>
            
              
              <a class="source" href="FirstPersonManipulator.html">
                FirstPersonManipulator.js
              </a>
            
              
              <a class="source" href="FirstPersonManipulatorDeviceOrientationController.html">
                FirstPersonManipulatorDeviceOrientationController.js
              </a>
            
              
              <a class="source" href="FirstPersonManipulatorHammerController.html">
                FirstPersonManipulatorHammerController.js
              </a>
            
              
              <a class="source" href="FirstPersonManipulatorStandardMouseKeyboardController.html">
                FirstPersonManipulatorStandardMouseKeyboardController.js
              </a>
            
              
              <a class="source" href="FirstPersonManipulatorWebVRController.html">
                FirstPersonManipulatorWebVRController.js
              </a>
            
              
              <a class="source" href="Manipulator.html">
                Manipulator.js
              </a>
            
              
              <a class="source" href="OrbitManipulator.html">
                OrbitManipulator.js
              </a>
            
              
              <a class="source" href="OrbitManipulatorDeviceOrientationController.html">
                OrbitManipulatorDeviceOrientationController.js
              </a>
            
              
              <a class="source" href="OrbitManipulatorEnums.html">
                OrbitManipulatorEnums.js
              </a>
            
              
              <a class="source" href="OrbitManipulatorGamePadController.html">
                OrbitManipulatorGamePadController.js
              </a>
            
              
              <a class="source" href="OrbitManipulatorHammerController.html">
                OrbitManipulatorHammerController.js
              </a>
            
              
              <a class="source" href="OrbitManipulatorLeapMotionController.html">
                OrbitManipulatorLeapMotionController.js
              </a>
            
              
              <a class="source" href="OrbitManipulatorStandardMouseKeyboardController.html">
                OrbitManipulatorStandardMouseKeyboardController.js
              </a>
            
              
              <a class="source" href="OrbitManipulatorWebVRController.html">
                OrbitManipulatorWebVRController.js
              </a>
            
              
              <a class="source" href="SwitchManipulator.html">
                SwitchManipulator.js
              </a>
            
              
              <a class="source" href="osgGA.html">
                osgGA.js
              </a>
            
              
              <a class="source" href="osgNameSpace.html">
                osgNameSpace.js
              </a>
            
              
              <a class="source" href="Compiler.html">
                Compiler.js
              </a>
            
              
              <a class="source" href="ShaderGenerator.html">
                ShaderGenerator.js
              </a>
            
              
              <a class="source" href="ShaderGeneratorProxy.html">
                ShaderGeneratorProxy.js
              </a>
            
              
              <a class="source" href="ShaderProcessor.html">
                ShaderProcessor.js
              </a>
            
              
              <a class="source" href="node.html">
                node.js
              </a>
            
              
              <a class="source" href="Node.html">
                Node.js
              </a>
            
              
              <a class="source" href="data.html">
                data.js
              </a>
            
              
              <a class="source" href="functions.html">
                functions.js
              </a>
            
              
              <a class="source" href="lights.html">
                lights.js
              </a>
            
              
              <a class="source" href="morph.html">
                morph.js
              </a>
            
              
              <a class="source" href="operations.html">
                operations.js
              </a>
            
              
              <a class="source" href="shadows.html">
                shadows.js
              </a>
            
              
              <a class="source" href="skinning.html">
                skinning.js
              </a>
            
              
              <a class="source" href="textures.html">
                textures.js
              </a>
            
              
              <a class="source" href="nodeFactory.html">
                nodeFactory.js
              </a>
            
              
              <a class="source" href="osgShader.html">
                osgShader.js
              </a>
            
              
              <a class="source" href="shaderLib.html">
                shaderLib.js
              </a>
            
              
              <a class="source" href="utils.html">
                utils.js
              </a>
            
              
              <a class="source" href="ShadowCastAttribute.html">
                ShadowCastAttribute.js
              </a>
            
              
              <a class="source" href="ShadowCastCompiler.html">
                ShadowCastCompiler.js
              </a>
            
              
              <a class="source" href="ShadowCastShaderGenerator.html">
                ShadowCastShaderGenerator.js
              </a>
            
              
              <a class="source" href="ShadowCasterVisitor.html">
                ShadowCasterVisitor.js
              </a>
            
              
              <a class="source" href="ShadowFrustumIntersection.html">
                ShadowFrustumIntersection.js
              </a>
            
              
              <a class="source" href="ShadowMap.html">
                ShadowMap.js
              </a>
            
              
              <a class="source" href="ShadowReceiveAttribute.html">
                ShadowReceiveAttribute.js
              </a>
            
              
              <a class="source" href="ShadowSettings.html">
                ShadowSettings.js
              </a>
            
              
              <a class="source" href="ShadowTechnique.html">
                ShadowTechnique.js
              </a>
            
              
              <a class="source" href="ShadowTexture.html">
                ShadowTexture.js
              </a>
            
              
              <a class="source" href="ShadowedScene.html">
                ShadowedScene.js
              </a>
            
              
              <a class="source" href="osgShadow.html">
                osgShadow.js
              </a>
            
              
              <a class="source" href="shaderLib.html">
                shaderLib.js
              </a>
            
              
              <a class="source" href="Text.html">
                Text.js
              </a>
            
              
              <a class="source" href="osgText.html">
                osgText.js
              </a>
            
              
              <a class="source" href="Composer.html">
                Composer.js
              </a>
            
              
              <a class="source" href="DisplayGeometryVisitor.html">
                DisplayGeometryVisitor.js
              </a>
            
              
              <a class="source" href="DisplayGraph.html">
                DisplayGraph.js
              </a>
            
              
              <a class="source" href="DisplayGraphNode.html">
                DisplayGraphNode.js
              </a>
            
              
              <a class="source" href="DisplayGraphRenderer.html">
                DisplayGraphRenderer.js
              </a>
            
              
              <a class="source" href="DisplayNormalVisitor.html">
                DisplayNormalVisitor.js
              </a>
            
              
              <a class="source" href="GizmoGeometry.html">
                GizmoGeometry.js
              </a>
            
              
              <a class="source" href="IntersectionVisitor.html">
                IntersectionVisitor.js
              </a>
            
              
              <a class="source" href="LineSegmentIntersector.html">
                LineSegmentIntersector.js
              </a>
            
              
              <a class="source" href="NodeGizmo.html">
                NodeGizmo.js
              </a>
            
              
              <a class="source" href="ParameterVisitor.html">
                ParameterVisitor.js
              </a>
            
              
              <a class="source" href="PolytopeIntersector.html">
                PolytopeIntersector.js
              </a>
            
              
              <a class="source" href="PolytopePrimitiveIntersector.html">
                PolytopePrimitiveIntersector.js
              </a>
            
              
              <a class="source" href="SphereIntersector.html">
                SphereIntersector.js
              </a>
            
              
              <a class="source" href="TangentSpaceGenerator.html">
                TangentSpaceGenerator.js
              </a>
            
              
              <a class="source" href="TriangleIntersector.html">
                TriangleIntersector.js
              </a>
            
              
              <a class="source" href="TriangleSphereIntersector.html">
                TriangleSphereIntersector.js
              </a>
            
              
              <a class="source" href="WebVR.html">
                WebVR.js
              </a>
            
              
              <a class="source" href="WebVRCustom.html">
                WebVRCustom.js
              </a>
            
              
              <a class="source" href="osgPool.html">
                osgPool.js
              </a>
            
              
              <a class="source" href="osgUtil.html">
                osgUtil.js
              </a>
            
              
              <a class="source" href="Renderer.html">
                Renderer.js
              </a>
            
              
              <a class="source" href="Scene.html">
                Scene.js
              </a>
            
              
              <a class="source" href="View.html">
                View.js
              </a>
            
              
              <a class="source" href="Viewer.html">
                Viewer.js
              </a>
            
              
              <a class="source" href="createStats.html">
                createStats.js
              </a>
            
              
              <a class="source" href="DeviceOrientation.html">
                DeviceOrientation.js
              </a>
            
              
              <a class="source" href="EventProxy.html">
                EventProxy.js
              </a>
            
              
              <a class="source" href="GamePad.html">
                GamePad.js
              </a>
            
              
              <a class="source" href="Hammer.html">
                Hammer.js
              </a>
            
              
              <a class="source" href="LeapMotion.html">
                LeapMotion.js
              </a>
            
              
              <a class="source" href="StandardMouseKeyboard.html">
                StandardMouseKeyboard.js
              </a>
            
              
              <a class="source" href="WebVR.html">
                WebVR.js
              </a>
            
              
              <a class="source" href="osgViewer.html">
                osgViewer.js
              </a>
            
              
              <a class="source" href="webgl-debug.html">
                webgl-debug.js
              </a>
            
              
              <a class="source" href="webgl-utils.html">
                webgl-utils.js
              </a>
            
              
              <a class="source" href="osgWrappers.html">
                osgWrappers.js
              </a>
            
              
              <a class="source" href="osg.html">
                osg.js
              </a>
            
              
              <a class="source" href="osgAnimation.html">
                osgAnimation.js
              </a>
            
              
              <a class="source" href="osgText.html">
                osgText.js
              </a>
            
          </div>
        </li>
      </ul>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>CullStack.js</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-meta">'use strict'</span>;
<span class="hljs-keyword">var</span> MACROUTILS = <span class="hljs-built_in">require</span>( <span class="hljs-string">'osg/Utils'</span> );
<span class="hljs-keyword">var</span> BoundingSphere = <span class="hljs-built_in">require</span>( <span class="hljs-string">'osg/BoundingSphere'</span> );
<span class="hljs-keyword">var</span> Camera = <span class="hljs-built_in">require</span>( <span class="hljs-string">'osg/Camera'</span> );
<span class="hljs-keyword">var</span> ComputeMatrixFromNodePath = <span class="hljs-built_in">require</span>( <span class="hljs-string">'osg/ComputeMatrixFromNodePath'</span> );
<span class="hljs-keyword">var</span> CullSettings = <span class="hljs-built_in">require</span>( <span class="hljs-string">'osg/CullSettings'</span> );
<span class="hljs-keyword">var</span> CullingSet = <span class="hljs-built_in">require</span>( <span class="hljs-string">'osg/CullingSet'</span> );
<span class="hljs-keyword">var</span> Matrix = <span class="hljs-built_in">require</span>( <span class="hljs-string">'osg/Matrix'</span> );
<span class="hljs-keyword">var</span> MatrixMemoryPool = <span class="hljs-built_in">require</span>( <span class="hljs-string">'osg/MatrixMemoryPool'</span> );
<span class="hljs-keyword">var</span> MatrixTransform = <span class="hljs-built_in">require</span>( <span class="hljs-string">'osg/MatrixTransform'</span> );
<span class="hljs-keyword">var</span> Notify = <span class="hljs-built_in">require</span>( <span class="hljs-string">'osg/Notify'</span> );
<span class="hljs-keyword">var</span> TransformEnums = <span class="hljs-built_in">require</span>( <span class="hljs-string">'osg/TransformEnums'</span> );
<span class="hljs-keyword">var</span> Vec3 = <span class="hljs-built_in">require</span>( <span class="hljs-string">'osg/Vec3'</span> );

<span class="hljs-keyword">var</span> CullStack = <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{

    <span class="hljs-keyword">this</span>._modelViewMatrixStack = [];
    <span class="hljs-keyword">this</span>._projectionMatrixStack = [];
    <span class="hljs-keyword">this</span>._viewportStack = [];
    <span class="hljs-keyword">this</span>._cullingSetStack = [];
    <span class="hljs-keyword">this</span>._frustumVolume = <span class="hljs-number">-1.0</span>;
    <span class="hljs-keyword">this</span>._bbCornerFar = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">this</span>._bbCornerNear = <span class="hljs-number">0</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <p>keep a matrix in memory to avoid to create matrix</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">this</span>._reservedMatrixStack = <span class="hljs-keyword">new</span> MatrixMemoryPool();

    <span class="hljs-keyword">this</span>._reserveCullingSetStack = [
        <span class="hljs-keyword">new</span> CullingSet()
    ];
    <span class="hljs-keyword">this</span>._reserveCullingSetStack.current = <span class="hljs-number">0</span>;</pre></div></div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <p>data for caching camera matrix inverse for computation of world/view
contains index of the camera node in the nodepath</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">this</span>._cameraIndexStack = [];</pre></div></div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <p>contains index of the camera modelview matrix in the modelViewMatrixStack</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">this</span>._cameraModelViewIndexStack = [];</pre></div></div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <p>contains the id has a key to computed Inverse Matrix</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>    <span class="hljs-keyword">this</span>._cameraMatrixInverse = {};

};

CullStack.prototype = MACROUTILS.objectInherit( CullSettings.prototype, {

    _getReservedCullingSet: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> m = <span class="hljs-keyword">this</span>._reserveCullingSetStack[ <span class="hljs-keyword">this</span>._reserveCullingSetStack.current++ ];
        <span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>._reserveCullingSetStack.current === <span class="hljs-keyword">this</span>._reserveCullingSetStack.length ) {
            <span class="hljs-keyword">this</span>._reserveCullingSetStack.push( <span class="hljs-keyword">new</span> CullingSet() );
        }
        <span class="hljs-keyword">return</span> m;
    },
    reset: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>._modelViewMatrixStack.length = <span class="hljs-number">0</span>;
        <span class="hljs-keyword">this</span>._projectionMatrixStack.length = <span class="hljs-number">0</span>;
        <span class="hljs-keyword">this</span>._cullingSetStack.length = <span class="hljs-number">0</span>;

        <span class="hljs-keyword">this</span>._reservedMatrixStack.reset();
        <span class="hljs-keyword">this</span>._reserveCullingSetStack.current = <span class="hljs-number">0</span>;

        <span class="hljs-keyword">this</span>._cameraModelViewIndexStack.length = <span class="hljs-number">0</span>;
        <span class="hljs-keyword">this</span>._cameraIndexStack.length = <span class="hljs-number">0</span>;
        <span class="hljs-keyword">this</span>._cameraMatrixInverse = {};
    },

    getProjectionMatrixStack: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._projectionMatrixStack;
    },
    getCurrentProjectionMatrix: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._projectionMatrixStack[ <span class="hljs-keyword">this</span>._projectionMatrixStack.length - <span class="hljs-number">1</span> ];
    },

    getCurrentModelViewMatrix: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._modelViewMatrixStack[ <span class="hljs-keyword">this</span>._modelViewMatrixStack.length - <span class="hljs-number">1</span> ];
    },

    getCurrentModelviewMatrix: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
        Notify.warn( <span class="hljs-string">'deprecated switch to getCurrentModelViewMatrix'</span> );
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.getCurrentModelViewMatrix();
    },

    getCameraInverseMatrix: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <p>Return or compute and cache the MatrixInverse of the last
active camera in absolute reference</p>

            </div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <p>if no index the camera inverse is the root with an fake id</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">if</span> ( !<span class="hljs-keyword">this</span>._cameraIndexStack.length )
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._cameraMatrixInverse[ <span class="hljs-number">-1</span> ];

        <span class="hljs-keyword">var</span> idx = <span class="hljs-keyword">this</span>._cameraIndexStack[ <span class="hljs-keyword">this</span>._cameraIndexStack.length - <span class="hljs-number">1</span> ];</pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <p>get the camera node</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">var</span> camera = <span class="hljs-keyword">this</span>.getNodePath()[ idx ];
        <span class="hljs-keyword">var</span> id = camera.getInstanceID();

        <span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>._cameraMatrixInverse[ id ] === <span class="hljs-literal">undefined</span> ) {
            <span class="hljs-keyword">var</span> indexInModelViewMatrixStack = <span class="hljs-keyword">this</span>._cameraModelViewIndexStack[ <span class="hljs-keyword">this</span>._cameraModelViewIndexStack.length - <span class="hljs-number">1</span> ];
            <span class="hljs-keyword">var</span> mat = <span class="hljs-keyword">this</span>._modelViewMatrixStack[ indexInModelViewMatrixStack ];
            <span class="hljs-keyword">var</span> matInverse = <span class="hljs-keyword">this</span>._reservedMatrixStack.get();
            Matrix.inverse( mat, matInverse );
            <span class="hljs-keyword">this</span>._cameraMatrixInverse[ id ] = matInverse;
        }
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._cameraMatrixInverse[ id ];
    },

    getCurrentModelWorldMatrix: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              <p>Improvment could be to cache more things
and / or use this method only if the shader use it</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">var</span> invMatrix = <span class="hljs-keyword">this</span>.getCameraInverseMatrix();
        <span class="hljs-keyword">var</span> m = <span class="hljs-keyword">this</span>._reservedMatrixStack.get();
        <span class="hljs-keyword">var</span> world = Matrix.mult( invMatrix, <span class="hljs-keyword">this</span>.getCurrentModelViewMatrix(), m );
        <span class="hljs-keyword">return</span> world;
    },

    getCurrentViewMatrix: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              <p>Improvment could be to cache more things
and / or use this method only if the shader use it</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">if</span> ( !<span class="hljs-keyword">this</span>._cameraIndexStack.length )
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._modelViewMatrixStack[ <span class="hljs-number">0</span> ];</pre></div></div>
            
        </li>
        
        
        <li id="section-11">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-11">&#182;</a>
              </div>
              <p>also we could keep the index of the current to avoid lenght-1 at each access
it’s implemented in osg like that:
<a href="https://github.com/openscenegraph/osg/blob/master/include/osg/fast_back_stack">https://github.com/openscenegraph/osg/blob/master/include/osg/fast_back_stack</a></p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">var</span> idx = <span class="hljs-keyword">this</span>._cameraModelViewIndexStack[ <span class="hljs-keyword">this</span>._cameraModelViewIndexStack.length - <span class="hljs-number">1</span> ];
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._modelViewMatrixStack[ idx ];
    },

    getViewport: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>._viewportStack.length === <span class="hljs-number">0</span> ) {
            <span class="hljs-keyword">return</span> <span class="hljs-literal">undefined</span>;
        }
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._viewportStack[ <span class="hljs-keyword">this</span>._viewportStack.length - <span class="hljs-number">1</span> ];
    },
    getLookVectorLocal: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> m = <span class="hljs-keyword">this</span>.getCurrentModelViewMatrix();
        <span class="hljs-keyword">return</span> Vec3.createAndSet( -m[ <span class="hljs-number">2</span> ], -m[ <span class="hljs-number">6</span> ], -m[ <span class="hljs-number">10</span> ] );
    },
    pushViewport: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"> vp </span>) </span>{
        <span class="hljs-keyword">this</span>._viewportStack.push( vp );
    },
    popViewport: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>._viewportStack.pop();
    },

    pushCullingSet: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> cs = <span class="hljs-keyword">this</span>._getReservedCullingSet();
        <span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>._enableFrustumCulling ) {
            Matrix.getFrustumPlanes( <span class="hljs-keyword">this</span>.getCurrentProjectionMatrix(), <span class="hljs-keyword">this</span>.getCurrentModelViewMatrix(), cs.getFrustum().getPlanes(), <span class="hljs-literal">false</span> );</pre></div></div>
            
        </li>
        
        
        <li id="section-12">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-12">&#182;</a>
              </div>
              <p>TODO: no far no near.
should check if we have them
should add at least a near 0 clip if not</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>            cs.getFrustum().setupMask( <span class="hljs-number">4</span> );
        }

        <span class="hljs-keyword">this</span>._cullingSetStack.push( cs );
    },
    popCullingSet: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._cullingSetStack.pop();
    },
    getCurrentCullingSet: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>._cullingSetStack[ <span class="hljs-keyword">this</span>._cullingSetStack.length - <span class="hljs-number">1</span> ];
    },


    pushCurrentMask: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> cs = <span class="hljs-keyword">this</span>.getCurrentCullingSet();
        <span class="hljs-keyword">if</span> ( cs ) cs.pushCurrentMask();
    },
    popCurrentMask: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> cs = <span class="hljs-keyword">this</span>.getCurrentCullingSet();
        <span class="hljs-keyword">if</span> ( cs ) cs.popCurrentMask();
    },

    isVerticesCulled: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"> vertices </span>) </span>{
        <span class="hljs-keyword">if</span> ( !<span class="hljs-keyword">this</span>._enableFrustumCulling )
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.getCurrentCullingSet().isVeritcesCulled( vertices );
    },

    isBoundingBoxCulled: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"> bb </span>) </span>{
        <span class="hljs-keyword">if</span> ( !<span class="hljs-keyword">this</span>._enableFrustumCulling )
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">return</span> bb.valid() &amp;&amp; <span class="hljs-keyword">this</span>.getCurrentCullingSet().isBoundingBoxCulled( bb );
    },

    isBoundingSphereCulled: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"> bs </span>) </span>{
        <span class="hljs-keyword">if</span> ( !<span class="hljs-keyword">this</span>._enableFrustumCulling )
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">return</span> bs.valid() &amp;&amp; <span class="hljs-keyword">this</span>.getCurrentCullingSet().isBoundingSphereCulled( bs );
    },

    isCulled: ( <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> bsWorld = <span class="hljs-keyword">new</span> BoundingSphere();
        <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"> node, nodePath </span>) </span>{
            <span class="hljs-keyword">if</span> ( !<span class="hljs-keyword">this</span>._enableFrustumCulling )
                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
            <span class="hljs-keyword">if</span> ( node.isCullingActive() ) {
                <span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>.getCurrentCullingSet().getCurrentResultMask() === <span class="hljs-number">0</span> )
                    <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>; <span class="hljs-comment">// father bounding sphere totally inside</span>

                <span class="hljs-keyword">var</span> matrix = <span class="hljs-keyword">this</span>._reservedMatrixStack.get();</pre></div></div>
            
        </li>
        
        
        <li id="section-13">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-13">&#182;</a>
              </div>
              <p>TODO: Perf just get World Matrix at each node transform
store it in a World Transform Node Path (only world matrix change)
so that it’s computed once and reused for each further node getCurrentModelWorld
otherwise, it’s 1 mult for each node, each matrix node, and each geometry
matrix = this.getCurrentModelWorldMatrix();
tricky: change push be before isculled, and pop in case of culling
strange bug for now on frustum culling sample with that</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>
                <span class="hljs-keyword">if</span> ( node <span class="hljs-keyword">instanceof</span> MatrixTransform ) {</pre></div></div>
            
        </li>
        
        
        <li id="section-14">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-14">&#182;</a>
              </div>
              <p>tricky: MatrixTransform getBound is already transformed to
its local space whereas nodepath also have its matrix …
so to get world space, you HAVE to remove that matrix from nodePATH
TODO: GC Perf of array slice creating new array</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>                    matrix = ComputeMatrixFromNodePath.computeLocalToWorld( nodePath.slice( <span class="hljs-number">0</span>, nodePath.length - <span class="hljs-number">1</span> ), <span class="hljs-literal">true</span>, matrix );

                } <span class="hljs-keyword">else</span> {

                    matrix = ComputeMatrixFromNodePath.computeLocalToWorld( nodePath, <span class="hljs-literal">true</span>, matrix );

                }

                Matrix.transformBoundingSphere( matrix, node.getBound(), bsWorld );
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.getCurrentCullingSet().isBoundingSphereCulled( bsWorld );
            } <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">this</span>.getCurrentCullingSet().resetCullingMask();
                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
            }
        };
    } )(),



    pushModelViewMatrix: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"> matrix </span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-15">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-15">&#182;</a>
              </div>
              <p>When pushing a matrix, it can be a transform or camera. To compute
differents matrix type in shader ( ViewMatrix/ModelWorldMatrix/ModelViewMatrix )
we track camera node when using pushModelViewMatrix
To detect a camera, we check on the nodepath the type of the node and if the
camera is relatif or absolute.
When we detect an absolute camera we keep it’s index to get it when needed to
compute the World/View matrix
There is an exception for the root camera, the root camera is not pushed on the
CullVisitor but only its matrixes, so to handle this we compute the inverse camera
when the nodepath has a lenght of 0
To avoid to compute too much inverse matrix, we keep a cache of them during the
traverse and store the result under the instanceID key, except for the root we use
the special id ‘-1’</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">var</span> np = <span class="hljs-keyword">this</span>.getNodePath();
        <span class="hljs-keyword">var</span> length = np.length;
        <span class="hljs-keyword">if</span> ( !length ) { <span class="hljs-comment">// root</span>
            <span class="hljs-keyword">var</span> matInverse = <span class="hljs-keyword">this</span>._reservedMatrixStack.get();
            Matrix.inverse( matrix, matInverse );
            <span class="hljs-keyword">this</span>._cameraMatrixInverse[ <span class="hljs-number">-1</span> ] = matInverse;
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">var</span> index = length - <span class="hljs-number">1</span>;
            <span class="hljs-keyword">if</span> ( np[ index ].getTypeID() === Camera.getTypeID() &amp;&amp; np[ index ].getReferenceFrame() === TransformEnums.ABSOLUTE_RF ) {
                <span class="hljs-keyword">this</span>._cameraIndexStack.push( index );
                <span class="hljs-keyword">this</span>._cameraModelViewIndexStack.push( <span class="hljs-keyword">this</span>._modelViewMatrixStack.length );
            }
        }

        <span class="hljs-keyword">this</span>._modelViewMatrixStack.push( matrix );
        <span class="hljs-keyword">var</span> lookVector = <span class="hljs-keyword">this</span>.getLookVectorLocal();

        <span class="hljs-comment">/*jshint bitwise: false */</span>
        <span class="hljs-keyword">this</span>._bbCornerFar = ( lookVector[ <span class="hljs-number">0</span> ] &gt;= <span class="hljs-number">0</span> ? <span class="hljs-number">1</span> : <span class="hljs-number">0</span> ) | ( lookVector[ <span class="hljs-number">1</span> ] &gt;= <span class="hljs-number">0</span> ? <span class="hljs-number">2</span> : <span class="hljs-number">0</span> ) | ( lookVector[ <span class="hljs-number">2</span> ] &gt;= <span class="hljs-number">0</span> ? <span class="hljs-number">4</span> : <span class="hljs-number">0</span> );
        <span class="hljs-keyword">this</span>._bbCornerNear = ( ~<span class="hljs-keyword">this</span>._bbCornerFar ) &amp; <span class="hljs-number">7</span>;
        <span class="hljs-comment">/*jshint bitwise: true */</span>

    },
    popModelViewMatrix: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-16">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-16">&#182;</a>
              </div>
              <p>if same index it’s a camera and we have to pop it</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">var</span> np = <span class="hljs-keyword">this</span>.getNodePath();
        <span class="hljs-keyword">var</span> index = np.length - <span class="hljs-number">1</span>;
        <span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>._cameraIndexStack.length &amp;&amp; index === <span class="hljs-keyword">this</span>._cameraIndexStack[ <span class="hljs-keyword">this</span>._cameraIndexStack.length - <span class="hljs-number">1</span> ] ) {
            <span class="hljs-keyword">this</span>._cameraIndexStack.pop();
            <span class="hljs-keyword">this</span>._cameraModelViewIndexStack.pop();
        }

        <span class="hljs-keyword">this</span>._modelViewMatrixStack.pop();
        <span class="hljs-keyword">var</span> lookVector;
        <span class="hljs-keyword">if</span> ( <span class="hljs-keyword">this</span>._modelViewMatrixStack.length !== <span class="hljs-number">0</span> ) {
            lookVector = <span class="hljs-keyword">this</span>.getLookVectorLocal();
        } <span class="hljs-keyword">else</span> {
            lookVector = Vec3.createAndSet( <span class="hljs-number">0.0</span>, <span class="hljs-number">0.0</span>, <span class="hljs-number">-1.0</span> );
        }

        <span class="hljs-comment">/*jshint bitwise: false */</span>
        <span class="hljs-keyword">this</span>._bbCornerFar = ( lookVector[ <span class="hljs-number">0</span> ] &gt;= <span class="hljs-number">0.0</span> ? <span class="hljs-number">1.0</span> : <span class="hljs-number">0.0</span> ) | ( lookVector[ <span class="hljs-number">1</span> ] &gt;= <span class="hljs-number">0</span> ? <span class="hljs-number">2.0</span> : <span class="hljs-number">0.0</span> ) | ( lookVector[ <span class="hljs-number">2</span> ] &gt;= <span class="hljs-number">0</span> ? <span class="hljs-number">4.0</span> : <span class="hljs-number">0.0</span> );
        <span class="hljs-keyword">this</span>._bbCornerNear = ( ~<span class="hljs-keyword">this</span>._bbCornerFar ) &amp; <span class="hljs-number">7</span>;
        <span class="hljs-comment">/*jshint bitwise: true */</span>

    },
    pushProjectionMatrix: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"> matrix </span>) </span>{
        <span class="hljs-keyword">this</span>._projectionMatrixStack.push( matrix );</pre></div></div>
            
        </li>
        
        
        <li id="section-17">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-17">&#182;</a>
              </div>
              <p>need to recompute frustum volume.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">this</span>._frustumVolume = <span class="hljs-number">-1.0</span>;

        <span class="hljs-keyword">this</span>.pushCullingSet();
    },
    popProjectionMatrix: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>._projectionMatrixStack.pop();</pre></div></div>
            
        </li>
        
        
        <li id="section-18">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-18">&#182;</a>
              </div>
              <p>need to recompute frustum volume.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>        <span class="hljs-keyword">this</span>._frustumVolume = <span class="hljs-number">-1.0</span>;

        <span class="hljs-keyword">this</span>.popCullingSet();
    },


} );

<span class="hljs-built_in">module</span>.exports = CullStack;</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
